---
title: '[å¯¦ä½œ] æ‰“å­—éŠæˆ²'
author: Phoebe
tags: Javascript
categories: Portfolio
date: 2021-01-28 21:25:17
---
## å­¸ç¿’åˆ°çš„çŸ¥è­˜é»

### CSS

- `display:none`
- `display:flex`

<!--more-->
### JS

- `Math.length()`
- `Math.floor()`
- `setInterval()`

## ç°¡ä»‹

[Demo](https://hff2.github.io/My-Projects/Typing_Game/index.html)

æ‰“å­—éŠæˆ²

![](https://i.imgur.com/gSk59Ap.png)

## HTML

![](https://i.imgur.com/9703HpQ.png)

### çµæ§‹

é€™é‚Šçš„çµæ§‹ååˆ†æ¸…æ¥šï¼Œæ²’æœ‰ç‰¹åˆ¥å›°é›£çš„é»ã€‚

```html=
 <button id="settings-btn" class="settings-btn">
      <i class="fas fa-cog"></i>
    </button>

    <div id="settings" class="settings">
      <form id="settings-form">
        <div>
          <label for="difficulty">Difficulty</label>
          <select id="difficulty">
            <option value="easy">Easy</option>
            <option value="medium">Medium</option>
            <option value="hard">Hard</option>
          </select>
        </div>
      </form>
    </div>

    <div class="container">
      <h2>ğŸ’» Speed Typer âŒ¨ï¸</h2>
      <small>Type the following:</small>

      <h1 id="word"></h1>

      <input
        type="text"
        id="text"
        autocomplete="off"
        placeholder="Type the word here..."
      />

      <p class="time-container">Time left: <span id="time">10s</span></p>

      <p class="score-container">Score: <span id="score">0</span></p>

      <div id="end-game-container" class="end-game-container"></div>
    </div>
```
## CSS

- `-webkit-` ç§æœ‰å‰ç¶´
- `-webkit-appearance: none`ï¼Œå»é™¤ç€è¦½å™¨çš„é è¨­æ¨£å¼ã€‚

```css=
select {
  width: 200px;
  padding: 5px;
  appearance: none;
  -webkit-appearance: none;
  -moz-appearance: none;
  border-radius: 0;
  background-color: #a7c5e3;
}
```
## JS

### å®£å‘Šè®Šæ•¸ Declare varialbe

> åŸç”Ÿ Js

é€™é‚Šä½¿ç”¨é™£åˆ—å„²å­˜æ¸¬é©—å–®å­—ã€‚

```javascript=
const word = document.getElementById("word");
const text = document.getElementById("text");
const scoreEl = document.getElementById("score");
const timeEl = document.getElementById("time");
const endgameEl = document.getElementById("end-game-container");
const settingsBtn = document.getElementById("settings-btn");
const settings = document.getElementById("settings");
const settingsForm = document.getElementById("settings-form");
const difficultySelect = document.getElementById("difficulty");

// List of words for game
const words = [
  "sigh",
  "tense",
  "airplane",
  "ball",
  "pies",
  "juice",
  "warlike",
  "bad",
  "north",
  "dependent",
  "steer",
  "silver",
  "highfalutin",
  "superficial",
  "quince",
  "eight",
  "feeble",
  "admit",
  "drag",
  "loving",
];

// Init word
let randomWord;

// Init score
let score = 0;

// Init time
let time = 10;

```

> Jquery

é¸æ“‡å™¨

```javascript=
$("#word")
$("#text")
$("#score")
$("#time")
$("#end-game-container")
$("#settings-btn")
$("#settings")
$("#settings-form")
$("#difficulty")
```

### éš¨æ©ŸæŒ‘é¸é™£åˆ—è£¡çš„å–®å­—ï¼ŒåŠ åˆ°å…ƒç´ çš„divè£¡

`getRandomWord()`
`addWordToDOM()`


> åŸç”Ÿ Js

- `Math.random()`å‡½å¼ï¼Œæœƒéš¨æ©Ÿç”¢ç”Ÿå‡º0~1ä¹‹é–“çš„å°æ•¸ï¼Œå‡ºä¾†çš„å€¼æ°¸é ä¸æœƒå¤§æ–¼1ã€‚
- `Math.floor()`å‡½å¼æœƒç„¡æ¢ä»¶æ¨å»åˆ°æ¯”è‡ªèº«å°çš„æœ€å¤§æ•´æ•¸ã€‚ex 4.6213 å›å‚³ 4
- `words.length`æ˜¯20ï¼Œä¹˜ä¸Šéš¨æ©Ÿ0-1ä¹‹é–“çš„æ•¸ï¼Œå†å–æ•´æ•¸ã€‚

![](https://i.imgur.com/ou53foz.png)


```javascript=
// Generate random word from array
function getRandomWord() {
  //å›å‚³éš¨æ©Ÿçš„å­—
  return words[Math.floor(Math.random() * words.length)];
}

//Add word to DOM å°‡å–å¾—çš„å­—ï¼Œæ”¾åˆ°#wordè£¡ã€‚
function addWordToDOM() {
  randomWord = getRandomWord();
  word.innerHTML = randomWord;
}

addWordToDOM();
```

> Jquery

1. åŸç”ŸJSæ˜¯ç”¨æ‰“å¥½çš„é™£åˆ—ï¼Œå†å»å–å¾—æ¸¬é©—å­—ã€‚
2. é€™è£¡ä½¿ç”¨å¯¦ä½œç„¡é™æ»¾å‹•é é¢å–çš„APIçš„æ–¹æ³•(æœå°‹random word api)ï¼Œå¾—åˆ°æ¸¬é©—å­—ä¸²ã€‚
3. å†ç›´æ¥å°‡å¾—åˆ°çš„å­—ä¸²æ”¾å…¥`#word`è£¡ã€‚

ä½¿ç”¨`$.ajax`æ–¹æ³•ã€‚


```javascript=
function getRandomWord() {
  $.ajax({
    url: "https://random-word-api.herokuapp.com/word?number=1",
    method: "get",
    dataType: "json",
    success: function (data) {
      $("#word").text(data);
    },
  });
}
```

### æ›´æ–°æˆç¸¾ï¼Œåˆ¤æ–·è¼¸å…¥çš„å­—æ˜¯å¦ç¬¦åˆå‡ºç¾çš„å­—

`updateScore()`

`addEventListener`çš„`input`ä¸éœ€è¦æŒ‰ä¸‹Enterå°±æœƒç›´æ¥è¼¸å…¥ã€‚

åˆ¤æ–·è¼¸å…¥æ˜¯æ­£ç¢ºå¾Œï¼Œæœƒç›´æ¥æ¸…ç©ºè¼¸å…¥æ¡†ã€‚

> åŸç”Ÿ Js

```javascript=
// Update score æ›´æ–°æˆç¸¾
function updateScore() {
  score++;
  scoreEl.innerHTML = score;
}

addWordToDOM();

// Event listeners

// Typing
text.addEventListener("input", (e) => {
  //å–å¾—è¼¸å…¥çš„å€¼
  const insertedText = e.target.value;
  //å¦‚æœè¼¸å…¥çš„å€¼èˆ‡éš¨æ©Ÿå–®å­—ç›¸åŒ
  if (insertedText === randomWord) {
    //æ›´æ–°æˆç¸¾+æ›´æ›ä¸‹ä¸€å€‹éš¨æ©Ÿå–®å­—ï¼Œæ›´æ–°æˆç¸¾
    addWordToDOM();
    updateScore();

    // Clear
    //è¼¸å…¥æ­£ç¢ºï¼Œè‡ªå‹•æ¸…ç©ºè¼¸å…¥æ¡†ï¼Œå¢åŠ é«”é©—
    e.target.value = "";
  }
});
```

> Jquery

- `.innerHTML =` è½‰æˆ `.html`
- `text.addEventListener("input"`è½‰æˆ `$("#text").on("input"`
- `e.target.value` è½‰æˆ `$(this).val()`
- `e.target.value = ""` è½‰æˆ `$(this).val("")`

```javascript=
function updateScore() {
  score++;
  $("#score").html(score);
}

$("#text").on("input", function () {
  const insertedText = $(this).val();
  const randomWord = $("#word").text();
  if (insertedText === randomWord) {
    updateScore();
    getRandomWord();
    $(this).val("");
  }
});
```

### æ¯ç§’æ›´æ–°å€’æ•¸ç‹€æ…‹ï¼Œå€’æ•¸åˆ°0æ™‚ï¼Œå‡ºç¾gameOver Panel

> åŸç”Ÿ Js

`updateTime()`
`gameOver()`

- `setInterval()`å›ºå®šå»¶é²äº†æŸæ®µæ™‚é–“ä¹‹å¾Œï¼Œæ‰å»åŸ·è¡Œå°æ‡‰çš„ç¨‹å¼ç¢¼ï¼Œç„¶å¾Œã€Œä¸æ–·å¾ªç’°ã€ã€‚
- ä½¿ç”¨`setInterval()`æ‰æœƒé–‹å§‹å€’æ•¸ï¼Œå°‘äº†é€™ä¸€è¡Œï¼Œ`time`è®Šæ•¸å°±ä¸æœƒæ›´å‹•ã€‚
- ç§’æ•¸æ­¸0æ™‚ï¼Œåœ¨cssé å…ˆå¯«å¥½çš„styleï¼Œè®“ä»–å‡ºç¾(`display:flex`)ï¼Œé è¨­ç‚º(`display:none`)ã€‚
```javascript=
// Start counting down
const timeInterval = setInterval(updateTime, 1000);

// Update time
function updateTime() {
  time--;
  timeEl.innerHTML = time + "s";
  // ç­‰æ–¼0æ™‚ï¼Œå‘¼å«gameOevr()
  if (time === 0) {
    clearInterval(time);
    //end the game
    gameOver();
  }
}

// Game over,show end screen
// é¡¯ç¤ºGameOverçš„Panel
function gameOver() {
  endgameEl.innerHTML = `
  <h1>Time ran out</h1>
  <p>Your final score is ${score}</p>
  <button onclick="location.reload()">Reload</button>
  `;

  endgameEl.style.display = "flex";
}
```

> Jquery

- `.style.display =`è½‰æˆ`.css("display", "flex")`

```javascript=
const timeInterval = setInterval(updateTime, 1000);

function updateTime() {
  var timeEl = $("#time");
  time--;
  timeEl.html(time + "s");
  if (time === 0) {
    clearInterval(time);
    gameOver();
  }
}

function gameOver() {
  const endgameEl = $("#end-game-container");
  endgameEl.html(`
  <h1>Time ran out</h1>
  <p>Your final score is ${score}</p>
  <button onclick="location.reload()">Reload</button>
  `);

  endgameEl.css("display", "flex");
}
```


### ç”¨Localstorgeå»è¨­å®šèˆ‡åˆ¤æ–·ä½¿ç”¨è€…é¸çš„é›£åº¦


> åŸç”ŸJs

- å®£å‘Š`difficulty`è®Šæ•¸ï¼Œä¸¦ä¸”åšåˆ¤æ–·ã€‚å¦‚æœå›°é›£åº¦ç‚ºç©ºï¼Œå°±å¾localStorageå–å¾—å€¼ï¼Œå¦‚æœæ²’æœ‰å€¼ï¼Œå°±é è¨­`medium`ã€‚


```javascript=
// Set difficulty to value in localStorage or medium
let difficulty =
  localStorage.getItem("difficulty") !== null
    ? localStorage.getItem("difficulty")
    : "medium";

// Set difficulty select value
difficultySelect.value =
  localStorage.getItem("difficulty") !== null
    ? localStorage.getItem("difficulty")
    : "medium";
    
// ä¾ç…§ä¸åŒçš„å›°é›£åº¦ï¼Œå¢åŠ ä¸åŒçš„æ™‚é–“ã€‚
if (difficulty == "hard") {
  time += 3;
} else if (difficulty == "medium") {
  time += 4;
} else {
  time += 6;
}

updateTime();
```

> Jquery

- `.value =` è½‰æˆ `.val`

```javascript=
let difficulty =
  localStorage.getItem("difficulty") !== null
    ? localStorage.getItem("difficulty")
    : "medium";

$("#difficulty").val(
  localStorage.getItem("difficulty") !== null
    ? localStorage.getItem("difficulty")
    : "medium"
);

    if (difficulty == "hard") {
      time += 3;
    } else if (difficulty == "medium") {
      time += 6;
    } else {
      time += 8;
    }
    updateTime();
```

### è¨­å®šèˆ‡ä¸‹æ‹‰é¸å–®çš„äº‹ä»¶ç›£è½

> Js

```javascript=
// Settings btn click
// æŒ‰ä¸‹å·¦ä¸‹è§’çš„é½’è¼ªï¼Œå¯ä»¥æ”¶åˆsettingsé¢æ¿ã€‚
settingsBtn.addEventListener("click", () => settings.classList.toggle("hide"));

// Settings select
// ä¸‹æ‹‰å¼é¸å–®æ”¹è®Šæ™‚ï¼Œå°‡å€¼å„²å­˜åœ¨localStorage
settingsForm.addEventListener("change", (e) => {
  difficulty = e.target.value;
  localStorage.setItem("difficulty", difficulty);
});
```


> Jquery

- `.classList.toggle()` è½‰æˆ `.toggleClass()`
- `.target.value` è½‰æˆ `.val()`
```javascript=
$("#settings-btn").on("click", function () {
  $("#settings").toggleClass("hide");
});

$("#settings-form").on("click", function () {
  difficulty = $("#difficulty").val();
  localStorage.setItem("difficulty", difficulty);
});

```
## åƒè€ƒæ–‡ç« 

è¨±å¤šå…§å®¹éƒ½è·Ÿä¹‹å‰çš„å¯¦ä½œæœ‰é‡è¤‡ï¼Œéƒ½æ˜¯åƒè€ƒä¹‹å‰çš„ç­†è¨˜XDã€‚